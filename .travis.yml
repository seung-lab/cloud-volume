language: python
python:
- '2.6'
- '2.7'
- '3.4'
- '3.5'
- '3.6'
dist: trusty
before_install:
- mkdir -p ~/.neuroglancer/secrets/
- openssl aes-256-cbc -K $encrypted_1f1d44165f5b_key -iv $encrypted_1f1d44165f5b_iv -in credentials.tar.enc -out credentials.tar -d
- tar -xvf credentials.tar
- mv google-secret.json ~/.neuroglancer/secrets/
- mv aws-secret.json ~/.neuroglancer/secrets/
- mv project_name ~/.neuroglancer/
- rm credentials.tar
install:
- virtualenv venv
- source venv/bin/activate
- pip install -e .
script:
- PYTHON_MAJOR_VERSION=`echo $TRAVIS_PYTHON_VERSION | head -c 1`
- if [[ $PYTHON_MAJOR_VERSION == 2 ]]; then py.test -v -x test; fi
- if [[ $PYTHON_MAJOR_VERSION == 3 ]]; then python3 -m pytest -v -x test; fi
